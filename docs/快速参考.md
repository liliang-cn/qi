# Qi 语言快速参考

## 基本程序结构

```qi
包 主程序;

函数 入口() {
    打印行("你好，世界！");
}
```

## 变量和类型

```qi
// 不可变变量
变量 x: 整数 = 10;
变量 名字 = "张三";  // 类型推断

// 可变变量
可变 计数器 = 0;
计数器 += 1;
```

**基本类型**: `整数` `浮点数` `字符串` `布尔` `字符`

## 控制流

### 条件语句

```qi
如果 x > 0 {
    打印("正数");
} 否则 如果 x < 0 {
    打印("负数");
} 否则 {
    打印("零");
}
```

### 循环

```qi
// while 循环
当 i < 10 {
    打印(i);
    i += 1;
}

// for 循环
对于 元素 在 列表 {
    打印(元素);
}

// 无限循环
循环 {
    如果 条件 { 跳出; }
}
```

## 函数

```qi
// 基本函数
函数 问候(名字: 字符串) {
    打印行("你好，", 名字);
}

// 带返回值
函数 加法(a: 整数, b: 整数): 整数 {
    返回 a + b;
}

// 公开函数
公开 函数 API(): 字符串 {
    返回 "对外接口";
}
```

## 结构体

```qi
结构体 用户 {
    名字: 字符串,
    年龄: 整数,
}

变量 用户1 = 用户 {
    名字: "张三",
    年龄: 25,
};

打印(用户1.名字);
```

## 枚举

```qi
枚举 颜色 {
    红色,
    绿色,
    蓝色,
}

变量 我的颜色 = 颜色::红色;
```

## 模块系统

```qi
// 导入整个模块
导入 标准库;

// 导入特定项
导入 标准库 { 打印, 打印行 };

// 相对路径
导入 ./工具;
导入 ../父模块;
```

## 并发

```qi
// 协程
协程 {
    打印("异步执行");
};

// 通道
变量 通道 = 创建通道<整数>();
通道 <- 42;
变量 值 = <- 通道;

// 互斥锁
变量 锁 = 创建互斥锁();
锁。加锁();
// 临界区
锁。解锁();
```

## 指针

```qi
变量 数值 = 42;
变量 指针 = 取地址 数值;  // 或 &数值
变量 值 = 解引用 指针;      // 或 *指针
```

## 异步编程

```qi
函数 异步操作(): 未来<整数> {
    返回 42;
}

函数 主函数() {
    变量 结果 = 等待 异步操作();
}
```

## 标准库常用函数

```qi
// 输入输出
打印("不换行");
打印行("自动换行");
变量 输入 = 读取行();

// 字符串
变量 长度 = 文本。长度();
变量 大写 = 文本。转大写();

// 集合
变量 列表 = [1, 2, 3];
列表。添加(4);
变量 大小 = 列表。长度();

// 文件
变量 内容 = 读取文件("文件.txt");
写入文件("输出.txt", 内容);
```

## 运算符

### 算术运算符
`+` `-` `*` `/` `%`

### 比较运算符
`==` `!=` `<` `>` `<=` `>=`

### 逻辑运算符
`&&` `||` `!`

### 其他运算符
`.` (成员访问) `&` (取地址) `*` (解引用) `<-` (通道发送)

## 标点符号

支持中英文混合：
- 分号: `;` 或 `；`
- 括号: `()` 或 `（）`，`{}` 或 `【】`，`[]` 或 `［］`

## 注释

```qi
// 单行注释

/*
 * 多行注释
 */
```

## 常用代码模式

### 错误处理

```qi
匹配 结果 {
    成功(值) => 打印(值),
    失败(错误) => 打印("错误:", 错误),
}
```

### 迭代列表

```qi
变量 列表 = [1, 2, 3, 4, 5];
对于 元素 在 列表 {
    打印行(元素);
}
```

### 条件表达式

```qi
变量 结果 = 如果 条件 { 值1 } 否则 { 值2 };
```

### 方法链

```qi
变量 结果 = 文本
    。转小写()
    。去空格()
    。分割(",");
```

## 编译和运行

```bash
# 检查语法
qi check 文件.qi

# 编译
qi compile 文件.qi

# 编译并运行
qi run 文件.qi

# 编译为可执行文件
qi build 文件.qi -o 输出文件
```

---

更多信息请参阅完整的[语言规范](语言规范.md)
