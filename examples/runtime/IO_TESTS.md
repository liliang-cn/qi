# IO 和 Stdlib 测试文档

本目录包含了 Qi 语言的运行时功能测试用例,包括文件 IO 操作、字符串处理、数学运算等。

## 测试文件列表

### 文件 IO 测试

#### 1. 文件操作.qi

基础文件读写测试

- 写入文件
- 读取文件
- 验证内容

#### 2. 多文件操作.qi

多个文件的并发操作测试

- 创建多个文件
- 批量读取文件
- 文件覆盖写入

#### 3. 文件性能测试.qi

文件 IO 性能和稳定性测试

- 长文本写入
- 重复更新同一文件
- 验证数据完整性

#### 4. 中文文件测试.qi

中文文件名和内容测试

- 中文文件名支持
- 中文内容读写
- 特殊字符处理
- 中英文混合内容

#### 5. 文件边界测试.qi

边界情况和错误处理

- 空文件处理
- 单字符内容
- 数字字符串
- 多行内容模拟
- 重复内容

### Stdlib 功能测试

#### 6. 字符串操作测试.qi

字符串拼接和处理测试

- 基础字符串拼接
- 中文字符串处理
- 空字符串处理
- 复杂字符串组合
- 长字符串拼接

#### 7. 数学运算测试.qi

数学函数和运算测试

- 基础算术运算(加减乘除)
- 数学函数(平方根、绝对值)
- 负数处理
- 大数字运算
- 浮点数精度

#### 8. 类型输出测试.qi

类型格式化输出测试

- 整数输出 (打印整数)
- 浮点数输出 (打印浮点数)
- 负数输出
- 零值处理
- 大数字输出

#### 9. 文件字符串综合.qi

文件操作与字符串处理的综合应用

- 报告生成(日志)
- 用户数据管理
- 配置文件生成
- 日志记录追加

#### 10. 完整功能测试.qi

所有功能的集成测试

- 数学运算
- 字符串操作
- 文件 IO
- 混合数据类型处理
- 批量操作
- 复杂计算

## 运行测试

### 运行单个测试

```bash
# 文件 IO 测试
cargo run -- run examples/runtime/文件操作.qi
cargo run -- run examples/runtime/多文件操作.qi
cargo run -- run examples/runtime/文件性能测试.qi
cargo run -- run examples/runtime/中文文件测试.qi
cargo run -- run examples/runtime/文件边界测试.qi

# Stdlib 功能测试
cargo run -- run examples/runtime/字符串操作测试.qi
cargo run -- run examples/runtime/数学运算测试.qi
cargo run -- run examples/runtime/类型输出测试.qi
cargo run -- run examples/runtime/文件字符串综合.qi

# 完整集成测试
cargo run -- run examples/runtime/完整功能测试.qi
```

### 运行所有 IO 测试

```bash
./scripts/run_io_tests.sh
```

## 预期输出

所有测试应该成功运行并输出相应的测试结果。测试会创建临时文件,这些文件会保留在项目根目录中。

## 清理测试文件

测试运行后会在项目根目录创建以下文件：

**文件 IO 测试产生的文件:**

- 测试.txt
- 文件 1.txt, 文件 2.txt, 文件 3.txt
- 长文本.txt
- 测试文档.txt
- 数据文件.txt
- 特殊字符.txt
- 混合内容.txt
- 空文件.txt
- 单字符.txt
- 数字.txt
- 多行.txt
- 重复.txt

**综合测试产生的文件:**

- 报告.txt
- 用户数据.txt
- 配置.txt
- 日志.txt
- 运行报告.txt
- 应用配置.txt
- 用户记录.txt
- 数据 1.txt, 数据 2.txt, 数据 3.txt

可以使用以下命令清理：

```bash
rm -f 测试.txt 文件*.txt 长文本.txt 测试文档.txt 数据文件.txt 特殊字符.txt 混合内容.txt 空文件.txt 单字符.txt 数字.txt 多行.txt 重复.txt 报告.txt 用户*.txt 配置.txt 日志.txt 运行*.txt 应用*.txt 数据*.txt
```

## 测试覆盖

### 文件 IO 功能

- ✅ 基础文件读写
- ✅ 多文件操作
- ✅ 中文文件名支持
- ✅ UTF-8 内容支持
- ✅ 特殊字符处理
- ✅ 文件覆盖写入
- ✅ 空内容处理
- ✅ 边界情况测试

### Stdlib 功能

- ✅ 字符串拼接
- ✅ 中文字符串处理
- ✅ 数学运算(加减乘除)
- ✅ 数学函数(平方根、绝对值)
- ✅ 类型输出(打印、打印整数、打印浮点数)
- ✅ 负数和零值处理
- ✅ 大数字处理
- ✅ 文件与字符串综合应用

### 集成测试

- ✅ 所有功能的综合测试
- ✅ 混合数据类型处理
- ✅ 批量操作
- ✅ 复杂表达式计算
